<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Merriweather&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Inter&display=swap" rel="stylesheet" />
    <link href="../css/acerca_no_iniciado.css" rel="stylesheet" />
    <title>ZonArte - Acerca de mi</title>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <a href="index_no_iniciado.html" class="logo">
                <img src="../images/Logo_Nombre.png" alt="ZonArte Logo" class="logo-img">
            </a>

            <div class="search-center">
                <div class="search-container">
                    <div class="search-bar">
                        <input type="text" class="search-input" placeholder="Buscar..." id="searchInput">
                    </div>
                    <div class="dropdown-menu" id="dropdownMenu"></div>
                </div>
            </div>

            <nav class="nav-menu">
                <a href="index_no_iniciado.html" class="nav-item">Inicio</a>
                <a href="acerca_no_iniciado.html" class="nav-item active">Acerca de mi</a>
                <a href="servicios_no_iniciado.html" class="nav-item">Servicios</a>
                <!--<a href="social_no_iniciado.html" class="nav-item">Social</a>-->
                <a href="contacto_no_iniciado.html" class="nav-item">Contacto</a>
            </nav>

            <div class="profile-btn">
                <a href="perfil_no_iniciado.html">
                    <img src="../images/Perfil.png" alt="Perfil" class="profile-img">
                </a>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <section class="about-section">

                <div class="section-header">
                    <h1 class="main-title">ACERCA DE MI</h1>
                </div>

                <div class="about-content">

                    <!-- Imagen a la IZQUIERDA -->
                    <div class="profile-art">
                        <div class="portfolio-item" id="profileImageContainer">
                            <input type="file" class="image-upload" id="aboutImageUpload" accept="image/*">
                        </div>
                    </div>

                    <!-- Textos a la DERECHA -->
                    <div class="info-panel" id="infoPanel">
                        <!-- Las secciones se agregarán dinámicamente aquí -->
                    </div>

                    <!-- Botones para agregar secciones -->
                    <div class="add-section-controls">
                        <button class="edit-btn" onclick="addInfoSection()">+ Agregar Sección</button>
                    </div>

                </div>
            </section>
        </main>

        <!-- Footer -->
         <footer class="footer">
            <div class="footer-text">Terminos y condiciones</div>
            <div class="footer-links">
                <a href="terminos.html" class="footer-link">Términos</a>
            </div>
        </footer>
    </div>

<script>
let sectionCount = 0;

/* Dropdown búsqueda */
const searchInput = document.getElementById('searchInput');
const dropdownMenu = document.getElementById('dropdownMenu');

searchInput.addEventListener('click', () => {
    dropdownMenu.classList.toggle('active');
});

document.addEventListener('click', (e) => {
    if (!e.target.closest('.search-container')) {
        dropdownMenu.classList.remove('active');
    }
});

/* Imagen editable */
const uploadInput = document.getElementById("aboutImageUpload");
const container = document.getElementById("profileImageContainer");

uploadInput.addEventListener("change", function() {
    if (this.files && this.files[0]) {
        const reader = new FileReader();
        reader.onload = (e) => {
            const oldImg = container.querySelector("img");
            if (oldImg) oldImg.remove();

            container.classList.add("has-image");

            const img = document.createElement("img");
            img.src = e.target.result;
            container.appendChild(img);
        };
        reader.readAsDataURL(this.files[0]);
    }
});

/* Agregar nueva sección */
function addInfoSection() {
    sectionCount++;
    const infoPanel = document.getElementById('infoPanel');
    
    const sectionDiv = document.createElement('div');
    sectionDiv.className = 'info-section';
    sectionDiv.id = 'section-' + sectionCount;
    
    sectionDiv.innerHTML = `
        <div class="section-title-editable">
            <div class="section-title-wrapper">
                <input type="text" class="section-title-input" placeholder="Título de la sección" value="" style="display: none;">
                <h2 class="section-title">Título de la sección</h2>
            </div>
            <div class="button-actions">
                <button class="edit-btn" onclick="toggleSectionEdit('section-${sectionCount}')">Editar</button>
                <button class="delete-btn-section" onclick="deleteSection('section-${sectionCount}')">Eliminar</button>
            </div>
        </div>
        <textarea class="edit-textarea" placeholder="Escribe aquí el contenido..." style="display: none;"></textarea>
        <div class="section-display">
            <p class="section-text"></p>
        </div>
    `;
    
    infoPanel.appendChild(sectionDiv);
}

/* Editar/Guardar sección */
function toggleSectionEdit(sectionId) {
    const section = document.getElementById(sectionId);
    const titleInput = section.querySelector('.section-title-input');
    const titleDisplay = section.querySelector('.section-title');
    const textArea = section.querySelector('.edit-textarea');
    const textDisplay = section.querySelector('.section-text');
    const displayDiv = section.querySelector('.section-display');
    const editBtn = section.querySelector('.edit-btn');
    
    if (editBtn.textContent === 'Editar') {
        // Modo edición
        section.classList.add('editing');
        titleInput.value = titleDisplay.textContent;
        titleInput.style.display = 'block';
        titleDisplay.style.display = 'none';
        textArea.value = textDisplay.textContent;
        textArea.style.display = 'block';
        displayDiv.style.display = 'none';
        editBtn.textContent = 'Guardar';
    } else {
        // Modo vista
        section.classList.remove('editing');
        titleDisplay.textContent = titleInput.value || 'Título de la sección';
        textDisplay.textContent = textArea.value || '';
        titleInput.style.display = 'none';
        titleDisplay.style.display = 'block';
        textArea.style.display = 'none';
        displayDiv.style.display = 'block';
        editBtn.textContent = 'Editar';
    }
}

/* Eliminar sección */
function deleteSection(sectionId) {
    const section = document.getElementById(sectionId);
    section.remove();
}
</script>

</body>
</html>