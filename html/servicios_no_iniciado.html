<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css?family=Merriweather&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Inter&display=swap" rel="stylesheet" />
    <link href="../css/servicios_no_iniciado.css" rel="stylesheet" />

    <title>ZonArte - Servicios</title>
</head>

<body>
    <header class="header">
        <a href="index_no_iniciado.html" class="logo">
            <img src="../images/Logo_Nombre.png" alt="ZonArte Logo" class="logo-img">
        </a>

        <div class="search-center">
            <div class="search-container">
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="Buscar..." id="searchInput">
                </div>
                <div class="dropdown-menu" id="dropdownMenu">
                    <div class="dropdown-title">Amigos</div>
                    <div class="suggestion-item">
                        <div class="suggestion-avatar">AC</div>
                        <div class="suggestion-info">
                            <div class="suggestion-name">Anderson Campos</div>
                            <div class="suggestion-role">Diseñador Gráfico</div>
                        </div>
                        <div class="suggestion-action">+</div>
                    </div>
                    <div class="suggestion-item">
                        <div class="suggestion-avatar">MC</div>
                        <div class="suggestion-info">
                            <div class="suggestion-name">María Contreras</div>
                            <div class="suggestion-role">Artista Digital</div>
                        </div>
                        <div class="suggestion-action">+</div>
                    </div>
                    <div class="dropdown-title">Personas</div>
                    <div class="suggestion-item">
                        <div class="suggestion-avatar">JR</div>
                        <div class="suggestion-info">
                            <div class="suggestion-name">Juan Rodriguez</div>
                            <div class="suggestion-role">Ilustrador</div>
                        </div>
                        <div class="suggestion-action">+</div>
                    </div>
                    <div class="suggestion-item">
                        <div class="suggestion-avatar">SP</div>
                        <div class="suggestion-info">
                            <div class="suggestion-name">Sofia Pereira</div>
                            <div class="suggestion-role">Fotógrafa</div>
                        </div>
                        <div class="suggestion-action">+</div>
                    </div>
                </div>
            </div>
        </div>

        <nav class="nav-menu">
            <a href="index_no_iniciado.html" class="nav-item">Inicio</a>
            <a href="acerca_no_iniciado.html" class="nav-item">Acerca de mi</a>
            <a href="servicios_no_iniciado.html" class="nav-item active">Servicios</a>
            <!--<a href="social_no_iniciado.html" class="nav-item">Social</a>-->
            <a href="contacto_no_iniciado.html" class="nav-item">Contacto</a>
        </nav>
        
        <div class="profile-btn">
            <a href="perfil_no_iniciado.html">
                <img src="../images/Perfil.png" alt="Perfil" class="profile-img">
            </a>
        </div>
    </header>

    <main>
        <div class="page-container">
            <div class="services-section">
                <div class="services-wrapper">
                    <div class="section-header">
                        <h1 class="section-title">SERVICIOS</h1>
                    </div>

                    <div class="content-area" id="contentArea">
                        <!-- Sección de Texto 1 -->
                        <div class="info-section" id="field-1">
                            <div class="section-title-editable">
                                <div class="field-title-wrapper">
                                    <input type="text" class="field-title-input" placeholder="Título del servicio" value="Título del servicio">
                                    <h3 class="field-display-title-header" style="display: none;">Título del servicio</h3>
                                </div>
                                <div class="button-actions">
                                    <button class="edit-btn" onclick="toggleEditMode('field-1')">Guardar</button>
                                </div>
                            </div>
                            <textarea class="field-description-input" placeholder="Descripción del servicio"></textarea>
                            <div class="field-display" style="display: none;">
                                <p class="field-display-description"></p>
                            </div>
                        </div>

                        <!-- Sección de Galería de Imágenes -->
                        <section class="portfolio-section">
                            <div class="portfolio-controls">
                                <button class="save-gallery-btn" id="saveGalleryBtn" onclick="toggleGalleryMode()">Guardar Galería</button>
                            </div>
                            <div class="portfolio-grid" id="gallery">
                                <div class="portfolio-item">
                                    <input type="file" class="image-upload" accept="image/*">
                                </div>
                            </div>
                        </section>

                        <!-- Sección de Texto 2 -->
                        <div class="info-section" id="field-3">
                            <div class="section-title-editable">
                                <div class="field-title-wrapper">
                                    <input type="text" class="field-title-input" placeholder="Título del servicio" value="Título del servicio">
                                    <h3 class="field-display-title-header" style="display: none;">Título del servicio</h3>
                                </div>
                                <div class="button-actions">
                                    <button class="edit-btn" onclick="toggleEditMode('field-3')">Guardar</button>
                                </div>
                            </div>
                            <textarea class="field-description-input" placeholder="Descripción del servicio"></textarea>
                            <div class="field-display" style="display: none;">
                                <p class="field-display-description"></p>
                            </div>
                        </div>

                        <!-- Sección de Texto 3 -->
                        <div class="info-section" id="field-4">
                            <div class="section-title-editable">
                                <div class="field-title-wrapper">
                                    <input type="text" class="field-title-input" placeholder="Título del servicio" value="Título del servicio">
                                    <h3 class="field-display-title-header" style="display: none;">Título del servicio</h3>
                                </div>
                                <div class="button-actions">
                                    <button class="edit-btn" onclick="toggleEditMode('field-4')">Guardar</button>
                                </div>
                            </div>
                            <textarea class="field-description-input" placeholder="Descripción del servicio"></textarea>
                            <div class="field-display" style="display: none;">
                                <p class="field-display-description"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <footer class="footer">
                <div class="footer-text">Terminos y condiciones</div>
                <div class="footer-links">
                    <a href="terminos.html" class="footer-link">Términos</a>
                </div>
            </footer>
        </div>
    </main>

<script>
let isEditMode = true;

const searchInput = document.getElementById('searchInput');
const dropdownMenu = document.getElementById('dropdownMenu');

searchInput.addEventListener('click', () => {
    dropdownMenu.classList.toggle('active');
});

document.addEventListener('click', (e) => {
    if (!e.target.closest('.search-container')) {
        dropdownMenu.classList.remove('active');
    }
});

document.querySelectorAll('.suggestion-item').forEach(item => {
    item.addEventListener('click', function() {
        const name = this.querySelector('.suggestion-name').textContent;
        searchInput.value = name;
        dropdownMenu.classList.remove('active');
    });
});

const gallery = document.getElementById("gallery");
const saveBtn = document.getElementById("saveGalleryBtn");

function createUploadItem() {
    const div = document.createElement("div");
    div.classList.add("portfolio-item");

    const input = document.createElement("input");
    input.type = "file";
    input.accept = "image/*";
    input.classList.add("image-upload");

    input.addEventListener("change", handleImageUpload);

    div.appendChild(input);
    return div;
}

function handleImageUpload(event) {
    const input = event.target;

    if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = (e) => {
            const parent = input.parentElement;

            const oldImg = parent.querySelector("img");
            if (oldImg) oldImg.remove();

            parent.classList.add("has-image");

            const img = document.createElement("img");
            img.src = e.target.result;
            parent.appendChild(img);

            if (isEditMode) {
                const emptySlots = document.querySelectorAll(".portfolio-item:not(.has-image)");
                if (emptySlots.length === 0) {
                    gallery.appendChild(createUploadItem());
                }
            }
        };
        reader.readAsDataURL(input.files[0]);
    }
}

function toggleGalleryMode() {
    if (isEditMode) {
        const emptySlots = gallery.querySelectorAll('.portfolio-item:not(.has-image)');
        emptySlots.forEach(slot => slot.remove());
        
        const allInputs = gallery.querySelectorAll('.image-upload');
        allInputs.forEach(input => {
            input.disabled = true;
        });
        
        isEditMode = false;
        saveBtn.textContent = 'Editar Galería';
        saveBtn.classList.add('edit-mode');
    } else {
        const allInputs = gallery.querySelectorAll('.image-upload');
        allInputs.forEach(input => {
            input.disabled = false;
        });
        
        const hasEmptySlot = gallery.querySelector('.portfolio-item:not(.has-image)');
        if (!hasEmptySlot) {
            gallery.appendChild(createUploadItem());
        }
        
        isEditMode = true;
        saveBtn.textContent = 'Guardar Galería';
        saveBtn.classList.remove('edit-mode');
    }
}

document.querySelector(".image-upload").addEventListener("change", handleImageUpload);

// Funciones para campos de texto
function toggleEditMode(fieldId) {
    const field = document.getElementById(fieldId);
    const titleInput = field.querySelector('.field-title-input');
    const titleHeader = field.querySelector('.field-display-title-header');
    const descInput = field.querySelector('.field-description-input');
    const displayDiv = field.querySelector('.field-display');
    const editBtn = field.querySelector('.edit-btn');

    if (editBtn.textContent === 'Guardar') {
        const displayDesc = field.querySelector('.field-display-description');
        
        titleHeader.textContent = titleInput.value || 'Título del servicio';
        if (displayDesc) {
            displayDesc.textContent = descInput.value || '';
        }
        
        titleInput.style.display = 'none';
        titleHeader.style.display = 'block';
        if (descInput) descInput.style.display = 'none';
        if (displayDiv) displayDiv.style.display = 'block';
        editBtn.textContent = 'Editar';
    } else {
        titleInput.value = titleHeader.textContent;
        titleInput.style.display = 'block';
        titleHeader.style.display = 'none';
        if (descInput) {
            descInput.style.display = 'block';
        }
        if (displayDiv) displayDiv.style.display = 'none';
        editBtn.textContent = 'Guardar';
    }
}
</script>

</body>

</html>